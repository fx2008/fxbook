# **留存分析**

## **1. 什么是“留存分析”？**

留存分析是一种用来分析用户参与情况\/活跃程度的分析模型，考查进行初始行为后的用户中，有多少人会进行后续行为。这是衡量产品对用户价值高低的重要指标。

留存分析可以帮助回答以下问题：

> * 一个新客户在未来的一段时间内是否完成了您期许用户完成的行为？如支付订单
> 
> * 某个社交产品改进了新注册用户的引导流程，期待改善用户注册后的参与程度，如何验证？
> 
> * 想判断某项产品改动是否奏效，如新增了一个邀请好友的功能，观察是否有人因新增功能而多使用产品几个月？

## **2. 为什么要做留存分析？直接看活跃用户百分比不够吗？**

按初始行为时间分组的留存分析可以消除用户增长对用户参与数据带来的影响。如果产品目前处于快速增长阶段，很有可能新用户中的活跃用户数增长掩盖了老用户活跃度的变化。通过留存分析，你可以将用户按照注册时间分段查看，得出类似如下结论：“三月份改版前，该月注册的用户7天留存只有15%；但是四月份改版后，该月注册的用户7天留存提高到了20%。”

同理，按照非时间维度的留存分析具有类似价值，比如，可以查看新功能上线之后，对不同性别用户的留存是否带来不同效果。

## **3. 留存分析界面功能简介**



### **A. 选择初始行为和后续行为**

初始行为和后续行为的选择有两种策略：

1. 初始行为选择用户只触发一次的事件，比如“注册”、“上传头像”、“激活设备”等，后续行为选择你期望用户重复触发的事件，比如“阅读文章”、“发帖”、“购买”等。这种留存用于对比分析不同阶段开始使用产品的新用户的参与情况，从而评估产品迭代或运营策略调整的得失。
2. 初始行为和后续行为选择相同的，期待用户重复触发的事件。这种留存用于分析忠实用户的使用模式。

当选择“任意行为”时，表示无论用户触发任何事件都视作留存行为。此时不可以针对事件选择筛选条件。当选择某一具体事件时，可以针对事件设置一个筛选条件。

### **B. 设置初始行为和后续行为筛选条件**

针对事件的属性，可以根据具体需求筛选初始行为或后续行为的细分维度。比如，我们想分析北京地区的用户注册后，后续购买手机的留存情况，那么可以定义初始行为是“注册”，同时添加筛选条件“城市等于北京”，后续行为是“支付订单的商品细节”，同时添加筛选条件“商品类型等于手机”，即可满足分析需求。

### **C. 设置用户筛选条件**

针对用户属性，筛选合适的分析对象。比如，只查看女性用户的留存情况。

### **D. 选择留存的考查时间段**

可以按照日、周、月查看不同时间体量下的留存情况。

### **E. 留存表格**



留存表格默认按照初始行为日期分组。每行的第一列代表了初始行为日期；第二列是在该日期触发了初始行为的总人数（独立用户数）；后面各列，分别是在相应时间后触发后续行为的用户数，以及占初始行为人数的百分比。

除了可以按照初始行为日期进行分组查看外，还可以分别按照初始行为事件属性或后续行为事件属性进行分组查看。如选择初始行为事件属性按注册渠道进行分组，我们则可以看到不同注册渠道的后续留存情况。

觉得有点复杂？没关系，鼠标悬浮到每个单元格上，会有文字提示告诉你这个单元格的具体含义。同时，单元格的背景颜色也能直观反映留存情况。



如果这里选择的属性是数字类型，可以自定义分组区间。如果没有设置，查询引擎会动态计算分组区间。此设置仅在当前查询生效，将查询保存为书签后在书签中也生效。

### **F. 浏览用户详情**

表格的单元格内的数字是可以点击的，点击可以浏览这些用户的详细信息，并且进一步浏览其中单个用户的详细行为序列。

### **G. 留存变化趋势曲线**

用另一种可视化方式，体现不同分组的留存情况对比。

## **4. 留存是如何计算的**

留存分析中展示的数字代表独立用户数。表示在选定时间范围内进行了初始行为的用户，有多少人在随后的第n天\/周\/月进行了后续行为。

### **4.1 基本计算规则**

假设定义的初始行为是A事件，后续行为是B事件，2015年1月1日到2015年1月8日某用户每天进行一件事，该用户的行为序列是A、B、A、A、A、B、A、B。我们进行时间范围是2015年1月1日到1月8日的7天留存。按加分组和不加分组两种情况分别举例介绍：

1.不加分组，则该用户分别是第2天，第6天的留存用户。

2.按初始行为事件A的省份分组，如果用户完成事件A的省份各不相同，该用户只会被归到一个省份中，这个省份取按拼音排序后的第一个。去重后，该用户分别是第2天，第3天，第4天，第5天，第6天的留存用户。

### **4.2 筛选条件的含义**

和其他分析功能一样，留存分析也提供了筛选功能。留存分析的筛选提供了两种不同的筛选类型。

1. 用户属性上的筛选：例如，我们添加的筛选条件是“性别”为“男”，则只有属性中“性别”为“男”的用户，才满足这个筛选条件，并且出现在筛选后的留存分析结果中；

2. 事件属性的筛选：和漏斗的触发限制条件含义相同，指定事件满足指定属性的过滤。


### **4.3 分组的含义**

留存分析提供了两种不同的分组类型。我们以一个初始行为是A，后续行为是B，时间范围是2015年1月1日到1月8日的7天留存来进行详细说明：

1. 用户属性上的分组：根据用户属性来进行更进一步的分组。例如我们添加的分组条件是“性别”，那么，就会分别对留存分析的结果按照“男”、“女”来进行分组；

2. 事件属性的分组：例如，我们选择的分组设置是初始行为的预置属性“屏幕高度”，则这个分组表示，在2015年1月1日到1月15日这个时间范围内，按A事件的“屏幕高度”这个属性的值来对他们进行分组；下面是几个具体的例子的描述: 1. 某个用户在这个时间段内的行为序列是A、B、C、A、B，第一次出现的A的“屏幕高度”值为“320”，第二次出现的A的“屏幕高度”值为“1080”，因为按照A事件最大值分组，所以这个用户会被划分到“1080”这个分组的统计结果中; 2. 某个用户在这个时间段内的行为序列是A、A，这个用户在初始行为A事件后没有后续行为。第一次出现的A的“屏幕高度”值为“1080”，第二次出现的A的“屏幕高度”值为“320”，因为按照A事件最大值分组，所以这个用户会被划分到“1080”这个分组的统计结果中；


## **5. 常见使用场景**

当下，流量越来越金贵，前端获客成本越来越高，企业要想获得更多的利润越来越依仗后端的客户，如何维护增加客户的黏性使用户在自己的平台上留存下来，显得越来越重要。大部分产品的用户的使用行为是随使用时间的推移呈阶段性变化的，我们可以按初始行为发生的事件进行划分，划分为群组即同期群，然后分析该相似群体随时间的变化，来衡量产品的表现。

以电商为例，对于新客户的定义主要有三种形式：网站新访客、新注册用户以及第一次下单的用户。我们分析这些新客户是否在平台上发生了购买，此时我们可以将用户行为分为：

* 初始行为：注册或第一次下单
* 后续行为：支付订单的商品细节

然后根据客户注册的时间按日或按月进行分组，得到同期群，观察该群体用户发生购买的7日留存、14日留存或30日留存\(可自由选择\)，通过比较不同的同期群，可以获知，从总体上看，关键指标的表现如用户购买是否越来越好了。

详细见下图：

我们在分析用户的留存时，一定要根据实际的业务需求，找到有价值的后续行为，对用户的价值留存进行分析，才能对产品的优化和改进提供实质性指导建议。

